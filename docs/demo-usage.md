# 123pan SDK 演示使用说明

## 🚀 快速开始

### 1. 启动服务

```bash
# 方式1: 使用启动脚本（推荐）
yarn start-demo

# 方式2: 分别启动服务
yarn test-server  # 启动API测试服务器 (端口3000)
yarn demo         # 启动演示页面服务器 (端口8080)
```

### 2. 访问演示页面

打开浏览器访问: http://localhost:8080

## 🎯 功能介绍

### SDK配置区域

- **Client ID/Secret**: 测试凭证（默认: test-client-id / test-client-secret）
- **API Base URL**: API服务器地址（默认: http://localhost:3000）
- **调试模式**: 开启后显示详细的请求/响应信息
- **SDK版本**: 选择使用构建版本还是源码版本
- **自动重载**: 开启后自动检测SDK更新并重新初始化

### 模块测试区域

演示页面包含8个模块的测试功能：

1. **🔐 核心认证模块**
   - 获取访问令牌
   - 刷新令牌
   - 限流测试
   - 突发请求测试

2. **👤 用户管理模块**
   - 获取用户信息
   - 获取空间信息

3. **📁 文件管理模块**
   - 获取文件列表
   - 创建文件夹
   - 获取文件详情
   - 删除文件
   - 文件上传（带进度条）

4. **🔗 分享管理模块**
   - 创建分享
   - 获取分享列表
   - 获取分享详情
   - 删除分享

5. **⬇️ 离线下载模块**
   - 创建下载任务
   - 获取任务列表
   - 暂停任务
   - 删除任务

6. **🔗 直链模块**
   - 创建直链
   - 获取直链列表

7. **🖼️ 图床模块**
   - 上传图片
   - 获取图片列表

8. **🎬 视频转码模块**
   - 创建转码任务
   - 获取转码列表

### 开发工具面板

点击"🛠️ 开发工具"按钮可以打开开发工具面板：

- **快速操作**
  - 📄 导出日志: 将测试日志导出为文本文件
  - 📥 导入配置: 从JSON文件导入SDK配置
  - 📤 导出配置: 将当前配置导出为JSON文件
  - 🔄 重置演示: 重置所有配置和日志

- **性能监控**
  - API调用次数统计
  - 平均响应时间
  - 错误率统计
  - 内存使用情况

## 🛠️ 开发调试

### 源码调试

1. 在SDK配置中选择"源码版本"
2. 开启调试模式
3. 在浏览器开发工具中启用Source Maps
4. 可以直接在源码中设置断点调试

### 自动重载

1. 开启"自动重载"功能
2. 修改SDK源码后运行 `yarn build`
3. 演示页面会自动检测更新并重新初始化SDK

### 实时日志

- 所有API请求和响应都会在日志区域显示
- 支持不同类型的日志（信息、成功、错误、警告）
- 可以导出日志用于分析

## 📝 测试场景

### 基础功能测试

1. 点击"初始化SDK"
2. 点击"测试连接"确认服务器连接正常
3. 依次测试各个模块的基本功能

### 错误处理测试

1. 修改Client ID为错误值
2. 重新初始化SDK
3. 观察错误处理机制

### 性能测试

1. 使用"突发请求"功能测试并发处理
2. 观察限流机制的工作情况
3. 查看性能统计数据

### 文件上传测试

1. 在文件管理模块中选择文件
2. 点击"上传文件"
3. 观察上传进度条

## 🔧 故障排除

### 常见问题

1. **SDK初始化失败**
   - 检查API测试服务器是否启动
   - 确认Client ID/Secret正确
   - 查看浏览器控制台错误信息

2. **API调用失败**
   - 确认网络连接正常
   - 检查API服务器日志
   - 验证请求参数格式

3. **文件上传失败**
   - 检查文件大小限制
   - 确认文件类型支持
   - 查看网络连接状态

### 调试技巧

1. **启用详细日志**
   - 开启调试模式
   - 查看浏览器网络面板
   - 导出日志进行分析

2. **使用开发工具**
   - 打开浏览器开发者工具
   - 查看Console面板的详细错误
   - 使用Network面板监控请求

3. **性能分析**
   - 查看性能监控数据
   - 分析API响应时间
   - 监控内存使用情况

## 📚 扩展开发

### 添加新的测试功能

1. 在HTML中添加新的测试按钮
2. 实现对应的JavaScript函数
3. 调用SDK的相应方法
4. 在日志中显示结果

### 自定义配置

1. 修改默认配置值
2. 添加新的配置选项
3. 实现配置的导入/导出功能

### 集成到CI/CD

演示页面可以用于自动化测试：

1. 使用无头浏览器访问演示页面
2. 自动执行测试流程
3. 收集测试结果和性能数据
